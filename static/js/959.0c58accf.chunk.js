"use strict";(self.webpackChunksocial_network_ts=self.webpackChunksocial_network_ts||[]).push([[959],{2959:function(e,s,t){t.r(s),t.d(s,{default:function(){return P}});var r=t(2791),a=t(364),n=t(5208),c=t(885),u="ChatPage_chatPage__LWka6",i="ChatPage_messagesPart__0602g",o="ChatPage_message__d9wql",l="ChatPage_userInfoContainer__Nb175",h="ChatPage_messageText__ZQ40A",d="ChatPage_addChatMessageForm__5MwLq",f="ChatPage_textField__gRx01",g=t(5557),m=t(501),x=t(184),_=r.memo((function(e){var s=e.message;return(0,x.jsxs)("div",{className:o,children:[(0,x.jsxs)("div",{className:l,children:[(0,x.jsx)(m.OL,{to:"/profile/"+s.userId,children:(0,x.jsx)("img",{src:null!==s.photo?s.photo:g,alt:"user image"})}),(0,x.jsx)("span",{children:s.userName})]}),(0,x.jsx)("span",{className:h,children:s.message})]})})),v=function(){var e=(0,a.v9)((function(e){return e.chat.messages})),s=(0,r.useRef)(null),t=(0,r.useState)(!1),n=(0,c.Z)(t,2),u=n[0],o=n[1];return(0,r.useEffect)((function(){var e;u&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,x.jsxs)("div",{className:i,style:{height:"400px",overflowY:"auto"},onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!u&&o(!0):u&&o(!1)},children:[e.map((function(e,s){return(0,x.jsx)(_,{message:e},e.id)})),(0,x.jsx)("div",{ref:s})]})},j=function(){var e=(0,r.useState)(""),s=(0,c.Z)(e,2),t=s[0],u=s[1],i=(0,a.I0)(),o=(0,a.v9)((function(e){return e.chat.status}));return(0,x.jsxs)("div",{className:d,children:[(0,x.jsx)("textarea",{onChange:function(e){return u(e.currentTarget.value)},value:t,className:f,placeholder:"Write your message..."}),(0,x.jsx)("button",{disabled:"ready"!==o,onClick:function(){t&&(i((0,n.bG)(t)),u(""))},children:"Send"})]})},p=function(){var e=(0,a.I0)(),s=(0,a.v9)((function(e){return e.chat.status}));return(0,r.useEffect)((function(){return e((0,n.WE)()),function(){e((0,n.R7)())}}),[]),(0,x.jsxs)("div",{children:["error"===s&&(0,x.jsx)("div",{children:"Some error occurred. Please, refresh the page"}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v,{}),(0,x.jsx)(j,{})]})]})},C=t(6871),P=function(){return(0,a.v9)((function(e){return e.auth.isAuth}))?(0,x.jsx)("div",{className:u,children:(0,x.jsx)(p,{})}):(0,x.jsx)(C.Fg,{to:"/login"})}}}]);
//# sourceMappingURL=959.0c58accf.chunk.js.map