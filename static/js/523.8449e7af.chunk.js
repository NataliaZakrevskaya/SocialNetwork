"use strict";(self.webpackChunksocial_network_ts=self.webpackChunksocial_network_ts||[]).push([[523],{8523:function(e,t,s){s.r(t),s.d(t,{default:function(){return k}});var a=s(2791),n=s(364),r=s(4337),c=s(885),i=s(501),o=s(5557),u="ChatPage_chatPage__nxWPU",l="ChatPage_chatPageBlock__rsmQV",h="ChatPage_messagesPart__Q1uq1",d="ChatPage_message__rsS04",f="ChatPage_userInfoContainer__1MipR",g="ChatPage_messageText__CN+hJ",_="ChatPage_addChatMessageForm__mkgOw",m="ChatPage_textField__9uhGQ",x="ChatPage_errorField__E9XFU",v="ChatPage_errorSpan__z1blq",j=s(184),p=a.memo((function(e){var t=e.message;return(0,j.jsxs)("div",{className:d,children:[(0,j.jsxs)("div",{className:f,children:[(0,j.jsx)(i.OL,{to:"/profile/"+t.userId,children:(0,j.jsx)("img",{src:null!==t.photo?t.photo:o,alt:"userImage"})}),(0,j.jsx)("span",{children:t.userName})]}),(0,j.jsx)("span",{className:g,children:t.message})]})})),C=function(){var e=(0,n.v9)((function(e){return e.chat.messages})),t=(0,a.useRef)(null),s=(0,a.useState)(!0),r=(0,c.Z)(s,2),i=r[0],o=r[1];return(0,a.useEffect)((function(){var e;i&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,j.jsxs)("div",{className:h,style:{height:"400px",overflowY:"auto"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<400?!i&&o(!0):i&&o(!1)},children:[e.map((function(e){return(0,j.jsx)(p,{message:e},e.id)})),(0,j.jsx)("div",{ref:t})]})},P=function(){var e=(0,a.useState)(""),t=(0,c.Z)(e,2),s=t[0],i=t[1],o=(0,a.useState)(null),u=(0,c.Z)(o,2),l=u[0],h=u[1],d=(0,n.I0)(),f=(0,n.v9)((function(e){return e.chat.status})),g=function(){s.trim().length>0?p(s):h(!0)},p=function(e){d((0,r.bG)(e)),i("")};return(0,j.jsxs)("div",{className:_,children:[(0,j.jsx)("textarea",{onChange:function(e){i(e.currentTarget.value),h(!1)},value:s,className:l?"".concat(m," ").concat(x):m,placeholder:"Write your message...",onKeyPress:function(e){"Enter"===e.code&&g()}}),l&&(0,j.jsx)("span",{className:v,children:"Min length is 1 symbol"}),(0,j.jsx)("button",{disabled:"ready"!==f,onClick:g,children:"Send"})]})},N=function(){var e=(0,n.I0)(),t=(0,n.v9)((function(e){return e.chat.status}));return(0,a.useEffect)((function(){return e((0,r.WE)()),function(){e((0,r.R7)())}}),[]),(0,j.jsxs)("div",{className:l,children:["error"===t&&(0,j.jsx)("div",{children:"Some error occurred. Please, refresh the page"}),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C,{}),(0,j.jsx)(P,{})]})]})},b=s(6871),k=function(){return(0,n.v9)((function(e){return e.auth.isAuth}))?(0,j.jsx)("div",{className:u,children:(0,j.jsx)(N,{})}):(0,j.jsx)(b.Fg,{to:"/login"})}},5557:function(e,t,s){e.exports=s.p+"static/media/flat-face-icon-23.00d92f05e4fec182b3f6.png"}}]);
//# sourceMappingURL=523.8449e7af.chunk.js.map