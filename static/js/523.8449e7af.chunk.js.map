{"version":3,"file":"static/js/523.8449e7af.chunk.js","mappings":"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","sources":["webpack://social_network_ts/./src/Pages/ChatPage/ChatPage.module.scss?ca1e","Pages/ChatPage/Chat/Messages/ChatMessage.tsx","Pages/ChatPage/Chat/Messages/Messages.tsx","Pages/ChatPage/Chat/Messages/AddChatMessageForm.tsx","Pages/ChatPage/Chat/Chat.tsx","Pages/ChatPage/ChatPage.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"chatPage\":\"ChatPage_chatPage__nxWPU\",\"chatPageBlock\":\"ChatPage_chatPageBlock__rsmQV\",\"messagesPart\":\"ChatPage_messagesPart__Q1uq1\",\"message\":\"ChatPage_message__rsS04\",\"userInfoContainer\":\"ChatPage_userInfoContainer__1MipR\",\"messageText\":\"ChatPage_messageText__CN+hJ\",\"addChatMessageForm\":\"ChatPage_addChatMessageForm__mkgOw\",\"textField\":\"ChatPage_textField__9uhGQ\",\"errorField\":\"ChatPage_errorField__E9XFU\",\"errorSpan\":\"ChatPage_errorSpan__z1blq\"};","import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {ChatMessageType} from \"../../../../Redux/Reducers/chat-reducer\";\r\nimport userDefaultPhoto from \"./../../../../Images/flat-face-icon-23.png\";\r\nimport s from \"../../ChatPage.module.scss\";\r\n\r\n\r\nexport const ChatMessage: React.FC<{ message: ChatMessageType }> = React.memo(({message}) => {\r\n    return (\r\n        <div className={s.message}>\r\n            <div className={s.userInfoContainer}>\r\n                <NavLink to={'/profile/' + message.userId}>\r\n                <img\r\n                    src={message.photo !== null ? message.photo : userDefaultPhoto}\r\n                    alt={'userImage'}\r\n                />\r\n                </NavLink>\r\n                <span>{message.userName}</span>\r\n            </div>\r\n            <span className={s.messageText}>{message.message}</span>\r\n        </div>\r\n    )\r\n})","import React, {useEffect, useRef, useState} from \"react\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../../../Redux/redux-store\";\r\nimport {ChatMessageType} from \"../../../../Redux/Reducers/chat-reducer\";\r\nimport {ChatMessage} from \"./ChatMessage\";\r\nimport s from \"../../ChatPage.module.scss\";\r\n\r\nexport const Messages: React.FC = () => {\r\n\r\n    const messages = useSelector<AppStateType, ChatMessageType[]>(state => state.chat.messages)\r\n    const messagesAnchorRef = useRef<HTMLDivElement>(null)\r\n    const [isAutoScroll, setIsAutoScroll] = useState<boolean>(true)\r\n    const scrollHandler = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        const element = e.currentTarget\r\n        if (Math.abs((element.scrollHeight - element.scrollTop) - element.clientHeight) < 400) {\r\n            !isAutoScroll && setIsAutoScroll(true)\r\n        } else {\r\n            isAutoScroll && setIsAutoScroll(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (isAutoScroll) {\r\n            messagesAnchorRef.current?.scrollIntoView({behavior: 'smooth'})\r\n        }\r\n    }, [messages])\r\n\r\n    return (\r\n        <div className={s.messagesPart} style={{height: '400px', overflowY: 'auto'}} onScroll={scrollHandler}>\r\n            {messages.map((m) => <ChatMessage key={m.id} message={m}/>)}\r\n            <div ref={messagesAnchorRef}/>\r\n        </div>\r\n    )\r\n}\r\n","import React, {ChangeEvent, KeyboardEvent, useState} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../../../Redux/redux-store\";\r\nimport {StatusType} from \"../../../../API/chat-api\";\r\nimport {sendMessage} from \"../../../../Redux/Reducers/chat-reducer\";\r\nimport s from \"../../ChatPage.module.scss\";\r\n\r\nexport const AddChatMessageForm: React.FC = () => {\r\n\r\n    const [message, setMessage] = useState<string>('')\r\n    const [error, setError] = useState<boolean | null>(null)\r\n    const dispatch = useDispatch()\r\n    const status = useSelector<AppStateType, StatusType>(state => state.chat.status)\r\n\r\n    const onEnter = (e: KeyboardEvent<HTMLTextAreaElement>) => {\r\n        if(e.code === 'Enter') validate()\r\n    }\r\n    const validate = () => {message.trim().length > 0 ? sendMessageHandler(message) : setError(true)}\r\n\r\n    const sendMessageHandler = (message: string) => {\r\n        dispatch(sendMessage(message))\r\n        setMessage('')\r\n    }\r\n    const onChangeHandler = (e: ChangeEvent<HTMLTextAreaElement>) => {\r\n        setMessage(e.currentTarget.value)\r\n        setError(false)\r\n    }\r\n\r\n    return (\r\n        <div className={s.addChatMessageForm}>\r\n                <textarea onChange={onChangeHandler}\r\n                          value={message}\r\n                          className={!error ? s.textField : `${s.textField} ${s.errorField}`}\r\n                          placeholder={'Write your message...'}\r\n                          onKeyPress={onEnter}\r\n                />\r\n            {error && <span className={s.errorSpan}>Min length is 1 symbol</span>}\r\n                <button\r\n                    disabled={status !== 'ready'}\r\n                    onClick={validate}\r\n                >Send</button>\r\n        </div>\r\n    )\r\n}","import React, {useEffect} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../../Redux/redux-store\";\r\nimport {StatusType} from \"../../../API/chat-api\";\r\nimport {startMessagesListening, stopMessagesListening} from \"../../../Redux/Reducers/chat-reducer\";\r\nimport {Messages} from \"./Messages/Messages\";\r\nimport {AddChatMessageForm} from \"./Messages/AddChatMessageForm\";\r\nimport s from \"../ChatPage.module.scss\"\r\n\r\nexport const Chat: React.FC = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const status = useSelector<AppStateType, StatusType>(state => state.chat.status)\r\n\r\n    useEffect(() => {\r\n\r\n        dispatch(startMessagesListening())\r\n        return () => {\r\n            dispatch(stopMessagesListening())\r\n        }\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <div className={s.chatPageBlock}>\r\n            {status === 'error' && <div>Some error occurred. Please, refresh the page</div>}\r\n            <>\r\n                <Messages/>\r\n                <AddChatMessageForm/>\r\n            </>\r\n\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport {Chat} from \"./Chat/Chat\";\r\nimport s from \"./ChatPage.module.scss\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../Redux/redux-store\";\r\n\r\nconst ChatPage: React.FC = () => {\r\n\r\n   const isAuth = useSelector<AppStateType, boolean>(state => state.auth.isAuth)\r\n\r\n    if (!isAuth) {\r\n        return <Navigate to='/login'/>\r\n    }\r\n    return (\r\n        <div className={s.chatPage}>\r\n            <Chat/>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default ChatPage;"],"names":["ChatMessage","React","message","className","s","to","userId","src","photo","userDefaultPhoto","alt","userName","Messages","messages","useSelector","state","chat","messagesAnchorRef","useRef","useState","isAutoScroll","setIsAutoScroll","useEffect","current","scrollIntoView","behavior","style","height","overflowY","onScroll","e","element","currentTarget","Math","abs","scrollHeight","scrollTop","clientHeight","map","m","id","ref","AddChatMessageForm","setMessage","error","setError","dispatch","useDispatch","status","validate","trim","length","sendMessageHandler","sendMessage","onChange","value","placeholder","onKeyPress","code","disabled","onClick","Chat","startMessagesListening","stopMessagesListening","auth","isAuth"],"sourceRoot":""}