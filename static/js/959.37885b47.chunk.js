"use strict";(self.webpackChunksocial_network_ts=self.webpackChunksocial_network_ts||[]).push([[959],{2959:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var a=s(2791),n=s(364),r=s(8108),c=s(885),i="ChatPage_chatPage__LWka6",o="ChatPage_chatPageBlock__CbyUo",u="ChatPage_messagesPart__0602g",l="ChatPage_message__d9wql",h="ChatPage_userInfoContainer__Nb175",d="ChatPage_messageText__ZQ40A",f="ChatPage_addChatMessageForm__5MwLq",g="ChatPage_textField__gRx01",_=s(5557),m=s(501),x=s(184),v=a.memo((function(e){var t=e.message;return(0,x.jsxs)("div",{className:l,children:[(0,x.jsxs)("div",{className:h,children:[(0,x.jsx)(m.OL,{to:"/profile/"+t.userId,children:(0,x.jsx)("img",{src:null!==t.photo?t.photo:_,alt:"user image"})}),(0,x.jsx)("span",{children:t.userName})]}),(0,x.jsx)("span",{className:d,children:t.message})]})})),j=function(){var e=(0,n.v9)((function(e){return e.chat.messages})),t=(0,a.useRef)(null),s=(0,a.useState)(!1),r=(0,c.Z)(s,2),i=r[0],o=r[1];return(0,a.useEffect)((function(){var e;i&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,x.jsxs)("div",{className:u,style:{height:"350px",overflowY:"auto"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<300?!i&&o(!0):i&&o(!1)},children:[e.map((function(e,t){return(0,x.jsx)(v,{message:e},e.id)})),(0,x.jsx)("div",{ref:t})]})},p=function(){var e=(0,a.useState)(""),t=(0,c.Z)(e,2),s=t[0],i=t[1],o=(0,n.I0)(),u=(0,n.v9)((function(e){return e.chat.status}));return(0,x.jsxs)("div",{className:f,children:[(0,x.jsx)("textarea",{onChange:function(e){return i(e.currentTarget.value)},value:s,className:g,placeholder:"Write your message..."}),(0,x.jsx)("button",{disabled:"ready"!==u,onClick:function(){s&&(o((0,r.bG)(s)),i(""))},children:"Send"})]})},C=function(){var e=(0,n.I0)(),t=(0,n.v9)((function(e){return e.chat.status}));return(0,a.useEffect)((function(){return e((0,r.WE)()),function(){e((0,r.R7)())}}),[]),(0,x.jsxs)("div",{className:o,children:["error"===t&&(0,x.jsx)("div",{children:"Some error occurred. Please, refresh the page"}),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(j,{}),(0,x.jsx)(p,{})]})]})},P=s(6871),b=function(){return(0,n.v9)((function(e){return e.auth.isAuth}))?(0,x.jsx)("div",{className:i,children:(0,x.jsx)(C,{})}):(0,x.jsx)(P.Fg,{to:"/login"})}},5557:function(e,t,s){e.exports=s.p+"static/media/flat-face-icon-23.00d92f05e4fec182b3f6.png"}}]);
//# sourceMappingURL=959.37885b47.chunk.js.map